import{$ as F,A as se,Aa as w,B as s,E as p,H as le,J as N,L as ce,M as g,N as P,O as M,P as de,Q as O,R as k,S as u,T as a,U as o,V as f,W as A,X as h,Y as m,Z as R,_ as D,aa as _,ba as pe,c as Z,ca as d,da as v,ea as G,f as ee,ga as me,h as te,ha as ue,i as ne,ia as fe,j as ie,m as z,ma as I,na as V,oa as he,p as c,q as re,r as y,s as x,sa as E,u as ae,w as C,wa as $,z as oe,za as L}from"./chunk-5Z7E5GBG.js";var U=class i{isWide$=te(window,"resize").pipe(ne(null),ee(()=>window.matchMedia("(min-width: 513px)").matches));static \u0275fac=function(e){return new(e||i)};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})};function ge(i){i||(i=c(ae));let t=new Z(e=>i.onDestroy(e.next.bind(e)));return e=>e.pipe(ie(t))}var Ce=["btnMenu"],ye=["btnRestart"],q=class i{router=c($);store=c(w);screenService=c(U);isWide=C(!1);showMenu=C(!1);btnMenu;btnRestart;constructor(){this.screenService.isWide$.pipe(ge()).subscribe(t=>{t&&this.showMenu()&&this.resumeGame()})}menu(){this.store.updateStatusGame(2),this.showMenu.set(!0),setTimeout(()=>{this.btnRestart?.nativeElement?.focus()})}restart(){this.store.clearGame(),this.store.initGame(),this.store.updateStatusGame(6),this.closeMenu()}newGame(){this.router.navigate(["/"])}resumeGame(){this.store.updateStatusGame(1),this.showMenu.set(!1)}closeMenu(){this.showMenu.set(!1),setTimeout(()=>{this.btnMenu?.nativeElement?.focus()})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-header"]],viewQuery:function(e,n){if(e&1&&(R(Ce,5),R(ye,5)),e&2){let r;D(r=F())&&(n.btnMenu=r.first),D(r=F())&&(n.btnRestart=r.first)}},decls:12,vars:3,consts:[["btnMenu",""],["btnRestart",""],[1,"header"],[1,"header__title"],[1,"header__options"],["text","Menu","theme","orange","aria-haspopup","true","aria-controls","menu-panel",1,"button--header","button--menu",3,"onClick"],["id","menu-panel","role","menu","aria-label","Game Controls",1,"header__options--menu"],["role","menuitem","text","Restart","theme","orange",1,"header--show-modal","button--header",3,"onClick"],["text","New Game","role","menuitem","theme","blue",1,"header--show-modal","button--header",3,"onClick"],["text","Resume Game","role","menuitem","theme","blue",1,"header--show-modal","button--header","button--resume-game",3,"onClick"],["aria-hidden","true",1,"header-backdrop"]],template:function(e,n){if(e&1){let r=A();a(0,"section",2)(1,"h1",3),d(2,"memory"),o(),a(3,"div",4)(4,"app-button",5,0),h("onClick",function(){return y(r),x(n.menu())}),o(),a(6,"div",6)(7,"app-button",7,1),h("onClick",function(){return y(r),x(n.restart())}),o(),a(9,"app-button",8),h("onClick",function(){return y(r),x(n.newGame())}),o(),a(10,"app-button",9),h("onClick",function(){return y(r),x(n.resumeGame())}),o()()(),f(11,"div",10),o()}e&2&&(_("show-menu",n.showMenu()),s(4),g("aria-expanded",n.showMenu()))},dependencies:[L],styles:[".board__header[_nghost-%COMP%]{grid-area:header}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-block:24px}.header__title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-24);letter-spacing:0px;color:var(--clr-blue-950)}.header__options--menu[_ngcontent-%COMP%], .header__options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.header__options--menu[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-backdrop[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 32em){.header.show-menu[_ngcontent-%COMP%]   .header__options--menu[_ngcontent-%COMP%]{display:flex;position:absolute;top:50%;transform:translate(-50%) translateY(-50%);left:50%;z-index:1000;background:var(--clr-white);padding:20px;align-items:center;border-radius:10px;width:100%;max-width:327px;gap:20px}.header.show-menu[_ngcontent-%COMP%]   .header__options--menu[_ngcontent-%COMP%]   .header--show-modal[_ngcontent-%COMP%]{width:100%}.header.show-menu[_ngcontent-%COMP%]   .header-backdrop[_ngcontent-%COMP%]{display:block;position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;z-index:999}}@media screen and (min-width: 32.0625em){.header[_ngcontent-%COMP%]{padding-block:36px}.header__options[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.header__options--menu[_ngcontent-%COMP%]{display:flex;flex-direction:row}.header__title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-40);letter-spacing:0px}.header[_ngcontent-%COMP%]   .button--menu[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .button--resume-game[_ngcontent-%COMP%]{display:none}}"],changeDetection:0})};var j={RESTART:"RESTART",SETUP_NEW_GAME:"SETUP_NEW_GAME"};var T=class i{transform(t){if(typeof t!="number"||isNaN(t))return"0:00";let e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`}static \u0275fac=function(e){return new(e||i)};static \u0275pipe=le({name:"timeFormat",type:i,pure:!0})};function xe(i,t){if(i&1&&(a(0,"li",9)(1,"span",10),d(2,"Time Elapsed"),o(),a(3,"span",11),d(4),ue(5,"timeFormat"),o()(),a(6,"li",9)(7,"span",10),d(8,"Moves Taken"),o(),a(9,"span",11),d(10),o()()),i&2){let e=m();s(4),v(fe(5,2,e.players[0].time)),s(6),v(e.players[0].moves)}}function we(i,t){i&1&&d(0," (Winner!) ")}function Pe(i,t){if(i&1&&(a(0,"li",9)(1,"span",10),d(2),P(3,we,1,0),o(),a(4,"span",11),d(5),o()()),i&2){let e=t.$implicit,n=m(2);_("selected",n.winners.includes(e.index)),s(2),G(" Player ",e.index+1," "),s(),M(n.winners.includes(e.index)?3:-1),s(2),G("",e.pairSuccessful," Pairs")}}function Me(i,t){if(i&1&&O(0,Pe,6,5,"li",12,de),i&2){let e=m();k(e.players)}}var H=class i{players=[];close=new N;ACTIONS=j;title="You did it!";information="Game over! Here\u2019s how you got on\u2026";winners=[];ngOnInit(){if(this.players.length>1){this.players.sort((e,n)=>n.pairSuccessful-e.pairSuccessful),this.winners.push(this.players[0].index);let t=this.players[0].pairSuccessful;for(let e=1;e<this.players.length;e++)t===this.players[e].pairSuccessful&&this.winners.push(this.players[e].index);this.title=this.winners.length===1?`Player ${this.winners[0]+1} Wins!`:"It\u2019s a tie!"}}closeModal(t){this.close.emit(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-result"]],inputs:{players:"players"},outputs:{close:"close"},decls:13,vars:3,consts:[[1,"modal-backdrop"],[1,"modal-result","scrollable"],[1,"modal-result__title"],[1,"modal-result__information"],[1,"modal-result__body"],[1,"modal-result__players"],[1,"modal-result__buttons"],["text","Restart","theme","orange",1,"modal",3,"onClick"],["text","Setup New Game","theme","blue",1,"modal",3,"onClick"],[1,"modal-result__player"],[1,"player--title"],[1,"player--value"],[1,"modal-result__player",3,"selected"]],template:function(e,n){e&1&&(f(0,"div",0),a(1,"div",1)(2,"h3",2),d(3),o(),a(4,"p",3),d(5),o(),a(6,"div",4)(7,"ul",5),P(8,xe,11,4)(9,Me,2,0),o()(),a(10,"div",6)(11,"app-button",7),h("onClick",function(){return n.closeModal(n.ACTIONS.RESTART)}),o(),a(12,"app-button",8),h("onClick",function(){return n.closeModal(n.ACTIONS.SETUP_NEW_GAME)}),o()()()),e&2&&(s(3),v(n.title),s(2),v(n.information),s(3),M(n.players.length===1?8:9))},dependencies:[L,T],styles:[".modal-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;z-index:999}.modal-result[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:var(--clr-white);padding:1rem;max-height:95dvh;overflow:auto;z-index:1000;border-radius:10px;width:100%;max-width:327px;padding:20px}.modal-result__title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-24);letter-spacing:0px;text-align:center;color:var(--clr-blue-950);margin-bottom:10px}.modal-result__information[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-14);letter-spacing:0px;text-align:center;color:var(--clr-blue-400)}.modal-result__body[_ngcontent-%COMP%]{margin-block:24px}.modal-result__players[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;gap:10px;max-height:25dvh;overflow:auto}.modal-result__player[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:10px;border-radius:5px;padding:10px;min-height:48px;background-color:var(--clr-blue-100)}.modal-result__player.selected[_ngcontent-%COMP%]{background-color:var(--clr-blue-950)}.modal-result__player.selected[_ngcontent-%COMP%]   .player--title[_ngcontent-%COMP%], .modal-result__player.selected[_ngcontent-%COMP%]   .player--value[_ngcontent-%COMP%]{color:var(--clr-white)}.modal-result__buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.modal-result__buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1 1 0}.modal-result[_ngcontent-%COMP%]   .player--title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-14);letter-spacing:0px;color:var(--clr-blue-400)}.modal-result[_ngcontent-%COMP%]   .player--value[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-20);letter-spacing:0px;color:var(--clr-blue-800)}@media screen and (min-width: 40em){.modal-result[_ngcontent-%COMP%]{max-width:654px;padding:54px}.modal-result__title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-48);letter-spacing:0px}.modal-result__information[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-18);letter-spacing:0px}.modal-result__body[_ngcontent-%COMP%]{margin-block:56px}.modal-result__buttons[_ngcontent-%COMP%]{flex-direction:row}.modal-result__players[_ngcontent-%COMP%]{gap:20px;max-height:45dvh}.modal-result__player[_ngcontent-%COMP%]{border-radius:10px;padding:20px 30px;min-height:72px;background-color:var(--clr-blue-100)}.modal-result[_ngcontent-%COMP%]   .player--title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-18);letter-spacing:0px}.modal-result[_ngcontent-%COMP%]   .player--value[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-32);letter-spacing:0px}}"],changeDetection:0})};var Q=class i{appRef=c(ce);injector=c(re);modalRef=null;open(t){if(this.modalRef)return Promise.reject("Modal already open");this.modalRef=he(H,{environmentInjector:this.injector}),this.modalRef.instance.players=t;let e=new Promise(n=>{this.modalRef.instance.close.subscribe(r=>{n(r),this.close()})});return this.appRef.attachView(this.modalRef.hostView),document.body.appendChild(this.modalRef.location.nativeElement),e}close(){this.modalRef&&(this.appRef.detachView(this.modalRef.hostView),this.modalRef.destroy(),this.modalRef=null)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=z({token:i,factory:i.\u0275fac,providedIn:"root"})};function _e(i,t=1){let e=[...i];for(let n=0;n<t;n++)for(let r=e.length-1;r>0;r--){let l=Math.floor(Math.random()*(r+1));[e[r],e[l]]=[e[l],e[r]]}return e}var W=class i{iconId=1;iconMap={1:"assets/icons/anchor.svg",2:"assets/icons/bug.svg",3:"assets/icons/car.svg",4:"assets/icons/flask.svg",5:"assets/icons/futbol.svg",6:"assets/icons/hand-spock.svg",7:"assets/icons/lira-sign.svg",8:"assets/icons/moon.svg",9:"assets/icons/snowflake.svg",10:"assets/icons/sun.svg"};get iconPath(){return this.iconMap[this.iconId]??"assets/icons/default.svg"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-icon"]],inputs:{iconId:"iconId"},decls:1,vars:2,consts:[[1,"icon",3,"src","alt"]],template:function(e,n){e&1&&f(0,"img",0),e&2&&u("src",n.iconPath,se)("alt","Icon "+n.iconId)},styles:[".icon[_ngcontent-%COMP%]{width:48px;height:48px;object-fit:contain}"],changeDetection:0})};function Se(i,t){if(i&1&&f(0,"app-icon",4),i&2){let e=m();u("iconId",e.value)}}function Oe(i,t){if(i&1&&(a(0,"span"),d(1),o()),i&2){let e=m();s(),v(e.value)}}var B=class i{value;idx;useIcons;temporalSelected=!1;selected=!1;iconId=1;selectedCard=new N;cardClasses=["size--small"];_size="small";set size(t){t!==this._size&&(this._size=t,this.cardClasses=[`size--${t}`])}get size(){return this._size}getAriaLabel(){return this.selected?`Card with value ${this.value}, matched`:this.temporalSelected?`Card with value ${this.value}, temporarily revealed`:"Hidden card"}click(){!this.temporalSelected&&!this.selected&&this.selectedCard.emit()}keydown(t){(t.key==="Enter"||t.key===" ")&&!this.selected&&!this.temporalSelected&&(t.preventDefault(),console.log("keydown",{selected:!this.selected,temporalSelected:!this.temporalSelected}),this.click())}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-flip-card"]],inputs:{value:"value",idx:"idx",useIcons:"useIcons",temporalSelected:"temporalSelected",selected:"selected",iconId:"iconId",size:"size"},outputs:{selectedCard:"selectedCard"},decls:6,vars:8,consts:[["tabindex","0","role","button",1,"flip-card",3,"click","keydown","ngClass"],[1,"flip-card__inner"],[1,"flip-card__front"],[1,"flip-card__back"],[3,"iconId"]],template:function(e,n){e&1&&(a(0,"div",0),h("click",function(){return n.click()})("keydown",function(l){return n.keydown(l)}),a(1,"div",1),f(2,"div",2),a(3,"div",3),P(4,Se,1,1,"app-icon",4)(5,Oe,2,1,"span"),o()()()),e&2&&(_("temporal-selected",n.temporalSelected)("selected",n.selected),u("ngClass",n.cardClasses),g("aria-label",n.getAriaLabel())("aria-pressed",n.temporalSelected||n.selected),s(4),M(n.useIcons?4:5))},dependencies:[E,W],styles:[".flip-card[_ngcontent-%COMP%]{width:46px;height:46px;border-radius:100%;perspective:1000px;color:var(--clr-white);cursor:pointer;font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-24);letter-spacing:0px;display:flex;justify-content:center;align-items:center}.flip-card.selected[_ngcontent-%COMP%], .flip-card.temporal-selected[_ngcontent-%COMP%]{pointer-events:none;cursor:none}.flip-card.selected[_ngcontent-%COMP%]   .flip-card__inner[_ngcontent-%COMP%], .flip-card.temporal-selected[_ngcontent-%COMP%]   .flip-card__inner[_ngcontent-%COMP%]{transform:rotateY(180deg)}.flip-card.temporal-selected[_ngcontent-%COMP%]   .flip-card__back[_ngcontent-%COMP%]{background-color:var(--clr-blue-350)}.flip-card.selected[_ngcontent-%COMP%]   .flip-card__back[_ngcontent-%COMP%]{background-color:var(--clr-orange-400)}.flip-card.size--normal[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-40);letter-spacing:0px;width:72px;height:72px}.flip-card__inner[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;transition:transform .6s;transform-style:preserve-3d}.flip-card__front[_ngcontent-%COMP%], .flip-card__back[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;border-radius:100%;backface-visibility:hidden;display:flex;align-items:center;justify-content:center}.flip-card__front[_ngcontent-%COMP%]{background-color:var(--clr-blue-800)}.flip-card__back[_ngcontent-%COMP%]{background-color:var(--clr-blue-300);color:var(--clr-white);transform:rotateY(180deg)}@media screen and (min-width: 40em){.flip-card[_ngcontent-%COMP%]{width:82px;height:82px;font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-44);letter-spacing:0px}.flip-card.size--normal[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-56);letter-spacing:0px;width:118px;height:118px}}.not_allowed[_nghost-%COMP%]   .flip-card[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6}.not_allowed[_nghost-%COMP%]   .flip-card.selected[_ngcontent-%COMP%]{opacity:1}"],changeDetection:0})};var ke=["flipCard"],Ie=(i,t)=>t.index;function Ee(i,t){if(i&1){let e=A();a(0,"app-flip-card",5,0),h("selectedCard",function(){let r=y(e).$implicit,l=m();return x(!r.selected&&l.selectedCard(r.index))})("keydown",function(r){let l=y(e).$implicit,be=m();return x(be.cardKeydown(r,l,l.index))}),o()}if(i&2){let e=t.$implicit,n=m();pe(n.classCard),u("useIcons",n.useIcons)("value",e.value)("idx",e.index)("temporalSelected",e.temporalSelected)("selected",e.selected)("size",n.size),g("aria-pressed",e.temporalSelected||e.selected)}}var Y=class i{modalResult=c(Q);router=c($);store=c(w);cdr=c(V);announcement="";classCard=[];nPlayers=0;useIcons=!1;nCells=0;size="small";gridClass=[];gridCardState=[];allPairs=[];pair={p0:-1,p1:-1};pairIndex=0;flipCardElements;constructor(){let t=null;I(()=>{let e=this.store.getStatusGame();e!==t&&(t=e,t===6&&(this.clearSelection(),this.initGame()))})}ngOnInit(){let t=this.store.settings();this.nPlayers=this.store.game().players.length,t.grid==="6x6"?(this.nCells=6*6,this.gridClass=["grid-6x6"],this.size="small"):(this.nCells=4*4,this.gridClass=["grid-4x4"],this.size="normal"),this.initGame()}initGame(){this.classCard=["no_show","not_allowed"],this.cdr.markForCheck();let t=this.store.settings(),e=[],n=1;for(let r=0;r<this.nCells;r+=2)e.push({index:r,value:n%10+1,selected:!1,temporalSelected:!1}),e.push({index:r+1,value:n%10+1,selected:!1,temporalSelected:!1}),n++;this.useIcons=t.theme=="Icons",this.allPairs=_e(e,2),this.allPairs.forEach((r,l)=>r.index=l),setTimeout(()=>{this.classCard=[],this.cdr.markForCheck()},300)}clearSelection(){this.allPairs.forEach(t=>{t.temporalSelected=!1,t.selected=!1}),this.cdr.markForCheck()}selectedCard(t){this.store.updateCurrentMovesGame(),this.pairIndex===1&&(this.pair.p1=t,this.allPairs[t].temporalSelected=!0,this.checkPairs()),this.pairIndex===0&&(this.pairIndex=1,this.pair.p0=t,this.allPairs[t].temporalSelected=!0),this.cdr.markForCheck()}checkPairs(){this.classCard=["not_allowed"],this.cdr.markForCheck(),setTimeout(()=>{let{p0:t,p1:e}=this.pair;if(e<0||t<0){console.error("Error Pair");return}if(this.allPairs[t].value===this.allPairs[e].value){this.announcement="Match!";let n=this.store.game().currentPlayer;[t,e].forEach(r=>{this.allPairs[r].selected=!0,this.allPairs[r].temporalSelected=!1,this.allPairs[r].player=n}),this.store.updateCurrentPairSuccessfulGame(),this.checkAllPairs()}else this.announcement="Try again!",[t,e].forEach(n=>{this.allPairs[n].selected=!1,this.allPairs[n].temporalSelected=!1}),this.nPlayers>0&&(this.store.moveNextPlayer(),this.store.updateStatusGame(7));setTimeout(()=>this.announcement="",2e3),this.pair={p0:-1,p1:-1},this.pairIndex=0,this.classCard=[],this.cdr.markForCheck()},500)}cardKeydown(t,e,n){let r=this.gridClass.includes("grid-6x6")?6:4,l=n;switch(t.key){case"ArrowRight":l=(n+1)%this.allPairs.length;break;case"ArrowLeft":l=(n-1+this.allPairs.length)%this.allPairs.length;break;case"ArrowDown":l=(n+r)%this.allPairs.length;break;case"ArrowUp":l=(n-r+this.allPairs.length)%this.allPairs.length;break;case"Enter":case" ":t.preventDefault(),!e.selected&&!e.temporalSelected&&this.selectedCard(e.index);return}t.preventDefault(),this.focusCard(l)}focusCard(t){this.flipCardElements.get(t)?.nativeElement.focus()}async checkAllPairs(){if(this.allPairs.every(e=>e.selected)){this.clearSelection(),this.store.updateStatusGame(3);let{players:e}=this.store.game();switch(await this.modalResult.open([...e])){case j.RESTART:this.store.clearGame(),this.store.initGame(),this.store.updateStatusGame(6),this.initGame();break;case j.SETUP_NEW_GAME:this.router.navigate(["/"]);break}}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-table"]],viewQuery:function(e,n){if(e&1&&R(ke,5,oe),e&2){let r;D(r=F())&&(n.flipCardElements=r)}},decls:6,vars:4,consts:[["flipCard",""],[1,"table"],["role","grid","aria-label","Memory game grid",1,"table__grid",3,"ngClass"],["role","gridcell","tabindex","0","aria-label","Card",3,"class","useIcons","value","idx","temporalSelected","selected","size"],["aria-live","polite","aria-atomic","true",1,"sr-announcer",2,"position","absolute","width","1px","height","1px","overflow","hidden"],["role","gridcell","tabindex","0","aria-label","Card",3,"selectedCard","keydown","useIcons","value","idx","temporalSelected","selected","size"]],template:function(e,n){e&1&&(a(0,"section",1)(1,"div",2),O(2,Ee,2,9,"app-flip-card",3,Ie),o(),a(4,"div",4),d(5),o()()),e&2&&(_("icons",n.useIcons),s(),u("ngClass",n.gridClass),s(),k(n.allPairs),s(3),G(" ",n.announcement," "))},dependencies:[B,E],styles:[".board__table[_nghost-%COMP%]{grid-area:table}.table[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}.table__grid[_ngcontent-%COMP%]{display:grid;margin:auto;gap:10px}.table__grid.grid-6x6[_ngcontent-%COMP%]{grid-template-columns:repeat(6,1fr)}.table__grid.grid-4x4[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}.table__grid.no_show[_ngcontent-%COMP%]{opacity:0}"],changeDetection:0})};var Te=i=>({selected:i}),K=class i{title="Acme";value="0.0";selected=!1;direction="column";labelledby="card-information"+Math.random().toString(36).substring(2,10);static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-card-information"]],inputs:{title:"title",value:"value",selected:"selected",direction:"direction"},decls:5,vars:8,consts:[["role","group","tabindex","-1",1,"card-information",3,"ngClass"],[1,"card-information__title"],[1,"card-information__value"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"h3",1),d(2),o(),a(3,"p",2),d(4),o()()),e&2&&(_("row",n.direction==="row"),u("ngClass",me(6,Te,n.selected)),g("aria-label",`${n.title}: ${n.value}`),s(2),v(n.title),s(2),v(n.value))},dependencies:[E],styles:['.card-information[_ngcontent-%COMP%]{position:relative;min-height:70px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:0;padding:5px 10px;width:100%;border-radius:5px;background-color:var(--clr-blue-100)}.card-information__title[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-15);letter-spacing:0px;color:var(--clr-blue-400)}.card-information__value[_ngcontent-%COMP%]{font-family:var(--ff);font-weight:var(--fw-bold);line-height:125%;font-size:var(--fs-24);letter-spacing:0px;color:var(--clr-blue-800)}.card-information.selected[_ngcontent-%COMP%]{background-color:var(--clr-orange-400)}.card-information.selected[_ngcontent-%COMP%]   .card-information__title[_ngcontent-%COMP%], .card-information.selected[_ngcontent-%COMP%]   .card-information__value[_ngcontent-%COMP%]{color:var(--clr-grey-50)}.card-information.selected[_ngcontent-%COMP%]:after{position:absolute;content:" ";top:0;left:50%;width:20px;height:20px;background:var(--clr-orange-400);transform:translate(-50%) translateY(-50%) rotate(135deg)}@media screen and (min-width: 40em){.card-information[_ngcontent-%COMP%]{align-items:flex-start;min-height:80px;gap:10px}.card-information.row[_ngcontent-%COMP%]{min-height:72px;flex-direction:row;justify-content:space-between;align-items:center;padding-inline:20px}}'],changeDetection:0})};var Re=(i,t)=>t.index;function De(i,t){if(i&1&&f(0,"app-card-information",1)(1,"app-card-information",2),i&2){let e=m();u("value",e.timeFormatPipe.transform(e.time())),s(),u("value",e.moves().toString())}}function Fe(i,t){if(i&1&&f(0,"app-card-information",3),i&2){let e=t.$implicit,n=m(2);u("selected",e.index===n.currentIndex())("title",`P${e.index+1}`)("value",e.index===n.currentIndex()?n.moves().toString():`${e.moves}`),g("aria-current",e.index===n.currentIndex()?"true":null)("aria-label","Player "+(e.index+1)+(e.index===n.currentIndex()?", current turn":""))}}function Ge(i,t){if(i&1&&O(0,Fe,1,5,"app-card-information",3,Re),i&2){let e=m();k(e.players())}}var J=class i{cdr=c(V);store=c(w);timeFormatPipe=new T;nPlayers=0;players=C([]);intervalId=0;currentIndex=C(0);time=C(0);moves=C(0);constructor(){let t=null,e=null,n=0;I(()=>{let r=this.store.getIndexPlayer();r!==n&&(n=r,this.currentIndex.set(r))}),I(()=>{let r=this.store.getCurrentMovesGame();r!==e&&(e=r,this.moves.set(r))}),I(()=>{let r=this.store.getStatusGame();if(r!==t){switch(t=r,r){case 7:this.getLastPlayersInformation(),this.store.updateStatusGame(1);break;case 1:this.initProperties(),this.initInterval();break;case 3:case 2:this.clearInterval();break;case 4:this.initInterval();break;case 6:this.time.set(0),this.moves.set(0),this.currentIndex.set(0),t=null,e=null,n=0,this.getLastPlayersInformation(),this.store.updateStatusGame(1);break}this.cdr.markForCheck()}})}ngOnInit(){let t=this.store.settings();this.nPlayers=+t.players||1,this.getLastPlayersInformation()}initProperties(){let t=this.store.game(),e=this.store.getCurrentPlayer();e&&(this.currentIndex.set(t.currentPlayer),this.time.set(e.time),this.moves.set(e.moves))}initInterval(){this.clearInterval(),this.intervalId=setInterval(()=>this.updateTime(),1e3)}getLastPlayersInformation(){let t=this.store.game();this.players.set(t.players)}updateTime(){this.time.update(t=>t+1),this.store.updateCurrentPlayerTime(this.time())}clearInterval(){clearInterval(this.intervalId)}ngOnDestroy(){this.clearInterval()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-footer"]],decls:3,vars:1,consts:[["role","contentinfo","aria-label","Game stats",1,"footer"],["direction","row","title","Time",1,"footer-card",3,"value"],["direction","row","title","Moves",1,"footer-card",3,"value"],[1,"footer-card",3,"selected","title","value"]],template:function(e,n){e&1&&(a(0,"footer",0),P(1,De,2,2)(2,Ge,2,0),o()),e&2&&(s(),M(n.nPlayers===1?1:2))},dependencies:[K],styles:[".board__footer[_nghost-%COMP%]{grid-area:footer}.footer[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px;justify-content:space-between;align-items:center;padding-block:23px}.footer-card[_ngcontent-%COMP%]{flex:1 1 0}"],changeDetection:0})};var ve=class i{store=c(w);ngOnInit(){this.store.initGame(),this.store.updateStatusGame(1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=p({type:i,selectors:[["app-board"]],decls:5,vars:0,consts:[[1,"board"],[1,"board__wrapper"],[1,"board__header"],[1,"board__table"],[1,"board__footer"]],template:function(e,n){e&1&&(a(0,"main",0)(1,"div",1),f(2,"app-header",2)(3,"app-table",3)(4,"app-footer",4),o()())},dependencies:[q,Y,J],styles:['.board[_ngcontent-%COMP%]{background-color:var(--clr-white);color:var(--clr-blue-950);min-height:100dvh;width:100%;max-width:1110px;margin-inline:auto}.board__wrapper[_ngcontent-%COMP%]{padding-inline:24px;display:grid;grid-template-columns:1fr;grid-template-rows:auto 1fr auto;grid-template-areas:"header" "table" "footer";min-height:100dvh}.board__header[_ngcontent-%COMP%]{grid-area:header}.board__table[_ngcontent-%COMP%]{grid-area:table}.board__footer[_ngcontent-%COMP%]{grid-area:footer}@media screen and (min-width: 40em){.board__wrapper[_ngcontent-%COMP%]{padding-inline:45px}}'],changeDetection:0})};export{ve as BoardPage};
